<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeMirror ç¼–è¾‘å™¨æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #1e1e1e;
            color: #d4d4d4;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .editor-wrapper {
            border: 1px solid #3c3c3c;
            border-radius: 8px;
            background: #252526;
            height: 400px;
            overflow: hidden;
        }
        
        .toolbar {
            display: flex;
            gap: 8px;
            padding: 8px 12px;
            background: #2d2d30;
            border-bottom: 1px solid #3c3c3c;
        }
        
        .toolbar button {
            background: #3c3c3c;
            border: none;
            color: #d4d4d4;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }
        
        .toolbar button:hover {
            background: #464647;
        }
        
        .editor-content {
            height: calc(100% - 45px);
            padding: 12px;
            overflow: auto;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        
        .status {
            margin-top: 20px;
            padding: 12px;
            background: #2d2d30;
            border-radius: 4px;
            font-size: 12px;
        }
        
        .test-content {
            margin-top: 20px;
        }
        
        .test-item {
            margin-bottom: 16px;
            padding: 12px;
            background: #2d2d30;
            border-radius: 4px;
        }
        
        .test-item h3 {
            margin: 0 0 8px 0;
            color: #569cd6;
        }
        
        .test-item p {
            margin: 0;
            font-size: 14px;
        }
        
        .success {
            color: #4ec9b0;
        }
        
        .error {
            color: #f44747;
        }
        
        .warning {
            color: #ffcc02;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ CodeMirror ç¼–è¾‘å™¨æµ‹è¯•é¡µé¢</h1>
        
        <div class="editor-wrapper">
            <div class="toolbar">
                <button onclick="testBold()">ç²—ä½“ (B)</button>
                <button onclick="testItalic()">æ–œä½“ (I)</button>
                <button onclick="testHeading()">æ ‡é¢˜ (H)</button>
                <button onclick="testList()">åˆ—è¡¨</button>
                <button onclick="testLink()">é“¾æ¥</button>
                <button onclick="testCode()">ä»£ç </button>
                <button onclick="clearEditor()">æ¸…ç©º</button>
            </div>
            
            <div class="editor-content" id="editor" contenteditable="true">
# æµ‹è¯•å†…å®¹

è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•ç¼–è¾‘å™¨ï¼Œç”¨äºéªŒè¯ï¼š

1. **æ»šåŠ¨æ¡åŠŸèƒ½** - å½“å†…å®¹è¶…å‡ºé«˜åº¦æ—¶åº”è¯¥æ˜¾ç¤ºæ»šåŠ¨æ¡
2. **å·¥å…·æ åŠŸèƒ½** - ç‚¹å‡»å·¥å…·æ æŒ‰é’®åº”è¯¥èƒ½æ ¼å¼åŒ–æ–‡æœ¬
3. **å¿«æ·é”®æ”¯æŒ** - Ctrl+B, Ctrl+I ç­‰å¿«æ·é”®

## é•¿å†…å®¹æµ‹è¯•

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.

Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

### æ›´å¤šå†…å®¹

Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.

Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt.

### ä»£ç ç¤ºä¾‹

```javascript
function testFunction() {
    console.log("è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•å‡½æ•°");
    return true;
}
```

### åˆ—è¡¨ç¤ºä¾‹

- é¡¹ç›® 1
- é¡¹ç›® 2
  - å­é¡¹ç›® 2.1
  - å­é¡¹ç›® 2.2
- é¡¹ç›® 3

### è¡¨æ ¼ç¤ºä¾‹

| åˆ—1 | åˆ—2 | åˆ—3 |
|-----|-----|-----|
| æ•°æ®1 | æ•°æ®2 | æ•°æ®3 |
| æ•°æ®4 | æ•°æ®5 | æ•°æ®6 |

è¿™é‡Œæœ‰è¶³å¤Ÿçš„å†…å®¹æ¥æµ‹è¯•æ»šåŠ¨æ¡æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚å¦‚æœç¼–è¾‘å™¨é«˜åº¦å›ºå®šï¼Œåº”è¯¥èƒ½çœ‹åˆ°å‚ç›´æ»šåŠ¨æ¡ã€‚
            </div>
        </div>
        
        <div class="status" id="status">
            <strong>çŠ¶æ€:</strong> ç¼–è¾‘å™¨å·²åŠ è½½ï¼Œè¯·æµ‹è¯•æ»šåŠ¨å’Œå·¥å…·æ åŠŸèƒ½
        </div>
        
        <div class="test-content">
            <div class="test-item">
                <h3>âœ… æ»šåŠ¨æ¡æµ‹è¯•</h3>
                <p>ç¼–è¾‘å™¨å†…å®¹è¶…å‡ºé«˜åº¦æ—¶åº”è¯¥æ˜¾ç¤ºå‚ç›´æ»šåŠ¨æ¡ã€‚å°è¯•æ»šåŠ¨æŸ¥çœ‹æ‰€æœ‰å†…å®¹ã€‚</p>
            </div>
            
            <div class="test-item">
                <h3>ğŸ”§ å·¥å…·æ æµ‹è¯•</h3>
                <p>é€‰æ‹©æ–‡æœ¬åç‚¹å‡»å·¥å…·æ æŒ‰é’®ï¼Œåº”è¯¥èƒ½åº”ç”¨ç›¸åº”çš„Markdownæ ¼å¼ã€‚</p>
            </div>
            
            <div class="test-item">
                <h3>âŒ¨ï¸ å¿«æ·é”®æµ‹è¯•</h3>
                <p>å°è¯•ä½¿ç”¨ Ctrl+B (ç²—ä½“), Ctrl+I (æ–œä½“) ç­‰å¿«æ·é”®ã€‚</p>
            </div>
        </div>
    </div>

    <script>
        const editor = document.getElementById('editor');
        const status = document.getElementById('status');
        
        function updateStatus(message, type = 'info') {
            const colors = {
                info: '#d4d4d4',
                success: '#4ec9b0',
                error: '#f44747',
                warning: '#ffcc02'
            };
            status.innerHTML = `<strong>çŠ¶æ€:</strong> <span style="color: ${colors[type]}">${message}</span>`;
        }
        
        function getSelectedText() {
            const selection = window.getSelection();
            return selection.toString();
        }
        
        function replaceSelectedText(newText) {
            const selection = window.getSelection();
            if (selection.rangeCount > 0) {
                const range = selection.getRangeAt(0);
                range.deleteContents();
                range.insertNode(document.createTextNode(newText));
                selection.removeAllRanges();
            }
        }
        
        function testBold() {
            const selected = getSelectedText();
            if (selected) {
                replaceSelectedText(`**${selected}**`);
                updateStatus('åº”ç”¨ç²—ä½“æ ¼å¼', 'success');
            } else {
                updateStatus('è¯·å…ˆé€‰æ‹©æ–‡æœ¬', 'warning');
            }
        }
        
        function testItalic() {
            const selected = getSelectedText();
            if (selected) {
                replaceSelectedText(`*${selected}*`);
                updateStatus('åº”ç”¨æ–œä½“æ ¼å¼', 'success');
            } else {
                updateStatus('è¯·å…ˆé€‰æ‹©æ–‡æœ¬', 'warning');
            }
        }
        
        function testHeading() {
            const selected = getSelectedText();
            if (selected) {
                replaceSelectedText(`## ${selected}`);
                updateStatus('åº”ç”¨æ ‡é¢˜æ ¼å¼', 'success');
            } else {
                updateStatus('è¯·å…ˆé€‰æ‹©æ–‡æœ¬', 'warning');
            }
        }
        
        function testList() {
            const selected = getSelectedText();
            if (selected) {
                replaceSelectedText(`- ${selected}`);
                updateStatus('åº”ç”¨åˆ—è¡¨æ ¼å¼', 'success');
            } else {
                updateStatus('è¯·å…ˆé€‰æ‹©æ–‡æœ¬', 'warning');
            }
        }
        
        function testLink() {
            const selected = getSelectedText();
            if (selected) {
                replaceSelectedText(`[${selected}](url)`);
                updateStatus('åº”ç”¨é“¾æ¥æ ¼å¼', 'success');
            } else {
                updateStatus('è¯·å…ˆé€‰æ‹©æ–‡æœ¬', 'warning');
            }
        }
        
        function testCode() {
            const selected = getSelectedText();
            if (selected) {
                replaceSelectedText(`\`${selected}\``);
                updateStatus('åº”ç”¨ä»£ç æ ¼å¼', 'success');
            } else {
                updateStatus('è¯·å…ˆé€‰æ‹©æ–‡æœ¬', 'warning');
            }
        }
        
        function clearEditor() {
            editor.textContent = '# æ–°æ–‡æ¡£\n\nå¼€å§‹ç¼–å†™å†…å®¹...';
            updateStatus('ç¼–è¾‘å™¨å·²æ¸…ç©º', 'info');
        }
        
        // å¿«æ·é”®æ”¯æŒ
        editor.addEventListener('keydown', function(e) {
            if (e.ctrlKey || e.metaKey) {
                switch(e.key.toLowerCase()) {
                    case 'b':
                        e.preventDefault();
                        testBold();
                        break;
                    case 'i':
                        e.preventDefault();
                        testItalic();
                        break;
                }
            }
        });
        
        // åˆå§‹åŒ–
        updateStatus('ç¼–è¾‘å™¨å·²åŠ è½½ï¼Œè¯·æµ‹è¯•åŠŸèƒ½', 'success');
    </script>
</body>
</html>
