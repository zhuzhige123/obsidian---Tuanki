# 📜 Tuanki 商业模式与许可证常见问题

## 📌 目录

- [商业模式说明](#商业模式说明)
- [许可证技术说明](#许可证技术说明)
- [常见问题](#常见问题)
- [购买与激活](#购买与激活)
- [技术支持](#技术支持)

---

## 🎯 商业模式说明

### 为什么采用"开源代码 + 付费许可证"模式？

Tuanki 采用这种模式有以下几个重要原因：

#### 1. 符合 Obsidian 官方要求
- Obsidian 官方插件市场要求所有插件（包括付费插件）必须开源
- 开源代码可以接受官方审核，确保安全性和质量

#### 2. 保障用户权益
- **代码透明**: 用户可以审计代码，确保没有恶意行为
- **数据安全**: 所有数据本地存储，没有隐藏的数据上传
- **社区监督**: 开源接受社区监督，发现问题可以快速修复

#### 3. 支持持续开发
- **开发成本**: 高质量软件需要大量时间和精力投入
- **维护成本**: 持续更新、修复 Bug、技术支持需要资源
- **创新动力**: 合理的商业回报能够激励更好的功能开发

#### 4. 成熟的商业模式
这种模式在软件行业已经非常成熟：
- **Sublime Text**: 代码可见，但需要购买许可证
- **JetBrains 系列**: 开源组件 + 商业许可证
- **GitLab**: 开源版本 + 企业版许可证
- **MySQL**: 开源数据库 + 商业许可证

---

## 🔐 许可证技术说明

### 加密机制：RSA-2048 数字签名

Tuanki 使用 **RSA-2048 数字签名** 来验证许可证，这是一种成熟且安全的加密方式。

#### RSA 加密原理简介

RSA 是一种非对称加密算法：
- **私钥（Private Key）**: 用于签名，保密存储
- **公钥（Public Key）**: 用于验证签名，可以公开

```
激活码生成流程（服务器端）：
[用户信息] → 私钥签名 → [激活码]

激活码验证流程（客户端）：
[激活码] → 公钥验证 → [有效/无效]
```

#### 为什么公钥可以公开？

很多人疑惑："公钥在代码中公开，不会被破解吗？"

**答案：完全安全！** 原因如下：

1. **数学保证**: 
   - 从公钥推导私钥在数学上是不可能的（需要破解大质数分解）
   - RSA-2048 的安全性已被全球金融、军事系统验证

2. **行业标准**:
   - HTTPS 网站的证书验证使用相同原理
   - 软件签名（如 Windows 应用签名）使用相同原理
   - 银行 U 盾也是类似的非对称加密

3. **实际案例**:
   - Apple App Store: 公钥内置在系统中，验证应用签名
   - GitHub SSH 密钥: 公钥上传到服务器，私钥本地保存
   - SSL/TLS 证书: 公钥在证书中公开，保证网站身份

#### 验证流程完全离线

```typescript
// 验证逻辑（客户端，完全开源）
class LicenseManager {
  private readonly PUBLIC_KEY = `-----BEGIN PUBLIC KEY-----
  MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA...
  -----END PUBLIC KEY-----`;

  async validateLicense(activationCode: string): Promise<boolean> {
    // 1. 解析激活码
    const licenseData = this.parseLicenseCode(activationCode);
    
    // 2. 使用公钥验证签名
    const isValid = await this.verifySignature(
      licenseData.payload,
      licenseData.signature,
      this.PUBLIC_KEY
    );
    
    // 3. 验证设备指纹（确保不被滥用）
    const currentFingerprint = this.generateDeviceFingerprint();
    const matches = licenseData.deviceFingerprint === currentFingerprint;
    
    return isValid && matches;
  }
}
```

**重点**：
- ✅ 验证逻辑完全在本地执行
- ✅ 不需要联网验证
- ✅ 不上传任何用户数据
- ✅ 代码完全开源，可审计

#### 设备指纹机制

为了防止激活码被滥用，我们使用设备指纹：

```typescript
function generateDeviceFingerprint(): string {
  // 基于多个硬件特征生成唯一标识
  const machineId = getMachineId();      // 机器ID
  const platform = getPlatform();        // 操作系统
  const architecture = getArchitecture(); // CPU架构
  
  // 生成 SHA-256 哈希
  return sha256(`${machineId}-${platform}-${architecture}`);
}
```

**说明**：
- 一个激活码绑定一台设备
- 设备指纹包含在激活码中
- 更换设备需要联系客服重新激活

---

## ❓ 常见问题

### Q1: 我能修改代码绕过许可证验证吗？

**A**: 技术上可以，我们不会也无法阻止。但是：

#### 破解的代价
- ❌ **无法获得官方技术支持**：遇到问题无法联系开发者
- ❌ **无法自动更新**：错过新功能和 Bug 修复
- ❌ **法律风险**：商业使用破解版可能面临法律问题
- ❌ **安全风险**：修改代码可能引入未知问题

#### 正版的优势
- ✅ **无缝更新体验**：自动接收所有功能更新
- ✅ **优先技术支持**：快速响应问题和建议
- ✅ **参与内测**：提前体验新功能
- ✅ **支持开发**：帮助项目持续改进
- ✅ **良心无愧**：支持开发者的劳动成果

#### 我们的态度

我们理解并尊重用户的选择：
- **学生和经济困难者**：可以申请免费许可证（发邮件说明情况）
- **开源贡献者**：活跃贡献者可获得免费许可证
- **试用用户**：所有基础功能免费，可以长期试用

我们相信，真正认可产品价值的用户会选择支持我们。

---

### Q2: 为什么不做成完全免费？

**A**: 高质量软件开发需要持续投入：

#### 开发成本
- ⏰ **时间投入**：Tuanki 开发耗时 6 个月以上
- 💻 **技术研发**：FSRS6 算法集成、Svelte 5 架构设计
- 🎨 **UI/UX 设计**：Cursor 风格界面、动画效果优化
- 🧪 **测试验证**：功能测试、性能优化、兼容性测试

#### 维护成本
- 🐛 **Bug 修复**：及时响应和修复用户反馈的问题
- 📝 **文档编写**：用户指南、API 文档、视频教程
- 💬 **技术支持**：回答用户问题、提供使用建议
- 🔄 **版本更新**：适配 Obsidian 新版本、添加新功能

#### 未来发展
- ✨ **新功能开发**：AI 制卡、高级统计、移动端支持
- 🌍 **国际化**：多语言支持、不同地区优化
- 🤝 **生态集成**：与更多插件和服务集成

合理的商业回报能够确保项目的长期发展。

---

### Q3: 免费功能和付费功能有什么区别？

**A**: 核心学习功能完全免费，高级功能需要许可证。

#### 免费功能（无需许可证）

**核心学习**:
- ✅ 创建和编辑所有类型的卡片
- ✅ FSRS6 智能调度算法
- ✅ 基础学习统计和进度跟踪
- ✅ 卡片表格视图
- ✅ 数据导入导出（JSON、CSV）
- ✅ Anki 数据同步
- ✅ APKG 文件导入

**说明**: 免费功能已经足够大多数用户日常学习使用！

#### 付费功能（需要许可证）

**高级功能**:
- 💎 AI 智能制卡（批量生成卡片）
- 💎 批量编辑操作
- 💎 高级统计分析（热力图、趋势图、详细报告）
- 💎 网格视图
- 💎 看板视图
- 💎 时间线视图
- 💎 Tuanki 标注系统
- 💎 卢曼卡片 ID
- 💎 所有未来高级功能

---

### Q4: 许可证是终身的还是订阅制？

**A**: **终身许可证，一次购买永久使用！**

#### 许可证说明
- 💰 **一次购买**: 只需支付一次费用
- ♾️ **终身有效**: 没有时间限制
- 🆓 **免费更新**: 终身免费接收所有功能更新
- 🖥️ **单设备授权**: 一个许可证绑定一台设备

#### 价格说明
- **正式价**: ¥64
- **早鸟优惠**: ¥46（限时）

#### 设备更换
- 更换设备需要联系客服重新激活
- 正常的设备更换（如换电脑）可以免费重新激活
- 一年内允许 2 次设备更换

---

### Q5: 如何申请免费许可证？

**A**: 以下群体可以申请免费许可证：

#### 符合条件的用户

**学生和教育者**:
- 在校学生（提供学生证或教育邮箱）
- 教育工作者（提供在职证明）

**经济困难者**:
- 确实无力支付但需要使用的用户
- 发送邮件说明情况

**开源贡献者**:
- 提交有价值的代码贡献
- 编写或翻译文档
- 帮助解答社区问题
- 参与测试和反馈

#### 申请方式
发送邮件到：tutaoyuan8@outlook.com

邮件标题：申请 Tuanki 免费许可证  
邮件内容：
- 说明您的情况（学生/贡献者/经济困难）
- 提供相关证明（学生证、贡献链接等）
- 简单介绍您的使用场景

我们会在 3 个工作日内回复。

---

### Q6: 数据安全和隐私保护如何保证？

**A**: Tuanki 高度重视用户隐私和数据安全。

#### 本地存储
- **完全本地**: 所有数据存储在您的 Obsidian Vault 中
- **无云同步**: 不使用任何云服务
- **离线可用**: 完全离线工作，不需要网络连接

#### 开源透明
- **代码开源**: 所有代码公开，可以审计
- **社区监督**: 接受社区审查，发现问题可以快速修复
- **无隐藏行为**: 不收集任何用户数据

#### 许可证验证
- **离线验证**: 验证逻辑完全在本地执行
- **不上传数据**: 不上传任何个人信息或学习数据
- **加密存储**: 许可证信息使用加密存储

---

### Q7: 如何备份和迁移数据？

**A**: Tuanki 的数据管理非常简单。

#### 数据位置
```
.obsidian/
  └── plugins/
      └── tuanki/
          ├── data.json          # 卡片数据
          ├── settings.json      # 设置配置
          └── decks/             # 牌组数据
```

#### 备份方法

**方法一：直接复制文件**
```bash
# 备份整个 tuanki 目录
cp -r .obsidian/plugins/tuanki ./backup/tuanki-backup-2025-01-01
```

**方法二：使用导出功能**
- 打开 Tuanki 设置
- 选择「数据管理」→「导出数据」
- 选择导出格式（JSON 或 CSV）

#### 迁移到新设备

**方法一：通过 Vault 同步**
- 使用 Obsidian Sync 或第三方同步工具（如 Dropbox、iCloud）
- 数据会自动同步到新设备

**方法二：手动迁移**
1. 在旧设备备份 tuanki 目录
2. 在新设备安装 Tuanki 插件
3. 将备份的 tuanki 目录复制到新设备

**许可证迁移**
- 联系客服提供新设备指纹
- 获取新的激活码
- 在新设备上激活

---

## 💳 购买与激活

### 购买流程

1. **发送购买邮件**
   - 发送邮件到：tutaoyuan8@outlook.com
   - 邮件标题：购买 Tuanki 许可证
   - 邮件内容：
     ```
     姓名/昵称：[您的称呼]
     用途：个人使用/商业使用
     设备指纹：[在插件设置中查看]
     ```

2. **完成支付**
   - 我们会回复支付方式（支付宝/微信/PayPal）
   - 完成支付后发送支付截图

3. **接收激活码**
   - 支付确认后 24 小时内发送激活码
   - 激活码格式：`TUANKI-XXXX-XXXX-XXXX-XXXX`

4. **激活插件**
   - 打开 Tuanki 设置
   - 进入「许可证」页面
   - 输入激活码并点击「激活」

### 如何获取设备指纹

1. 打开 Obsidian
2. 进入「设置」→「Tuanki」
3. 点击「许可证」标签
4. 复制显示的「设备指纹」

### 激活失败怎么办？

如果激活失败，请检查：
- ✅ 激活码是否完整复制（包括所有破折号）
- ✅ 网络连接是否正常
- ✅ 设备指纹是否匹配

仍然无法解决？联系技术支持：tutaoyuan8@outlook.com

---

## 🛠️ 技术支持

### 获取帮助的途径

**GitHub Issues**（推荐）:
- 网址：https://github.com/zhuzhige123/obsidian---Tuanki/issues
- 适用于：Bug 报告、功能建议
- 响应时间：1-3 个工作日

**GitHub Discussions**:
- 网址：https://github.com/zhuzhige123/obsidian---Tuanki/discussions
- 适用于：使用问题、功能讨论
- 社区互助

**电子邮件**:
- 邮箱：tutaoyuan8@outlook.com
- 适用于：购买咨询、许可证问题、隐私问题
- 响应时间：1-2 个工作日

### Bug 报告模板

```markdown
**问题描述**
简要描述问题

**复现步骤**
1. 打开 XXX
2. 点击 XXX
3. 看到错误 XXX

**期望行为**
描述您期望的正常行为

**截图**
如果适用，请添加截图

**环境信息**
- Obsidian 版本：
- Tuanki 版本：
- 操作系统：
- 是否使用许可证：是/否
```

### 功能建议

我们欢迎所有功能建议！请在 GitHub Discussions 中提出。

---

## 🤝 贡献者福利

### 如何成为贡献者

**代码贡献**:
- 修复 Bug
- 开发新功能
- 优化性能
- 改进架构

**文档贡献**:
- 编写用户指南
- 翻译文档（英文、日文等）
- 制作视频教程
- 整理 FAQ

**社区贡献**:
- 在 GitHub Discussions 中解答问题
- 在论坛推广 Tuanki
- 提供详细的测试反馈
- 帮助新用户上手

### 贡献者奖励

**免费许可证**:
- 提交 3 个有价值的 PR：获得免费许可证
- 翻译完整文档：获得免费许可证
- 持续活跃的社区贡献者：获得免费许可证

**其他奖励**:
- 在 README 中列入贡献者名单
- 优先参与新功能内测
- 直接与开发团队沟通
- 影响产品发展方向

---

## 📧 联系我们

**开发者邮箱**: tutaoyuan8@outlook.com

**GitHub**: https://github.com/zhuzhige123/obsidian---Tuanki

我们期待听到您的声音！

---

<div align="center">

**感谢您选择 Tuanki！**

Made with ❤️ by Tuanki Team

</div>

